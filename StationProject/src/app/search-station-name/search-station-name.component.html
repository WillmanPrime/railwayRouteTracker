<div style="float: left;">
    @if (!collapsed) {<div style="width:50%;">
        <button class="btn btn-danger" style="align-items: right;" (click)="collapsed = true;">
            << </button>
                <app-side-nav></app-side-nav>
    </div>}
    @else {
    <button class="btn btn-success" (click)="collapsed = false;" style="float: left">>></button>
    }
</div>
<div style="margin-top: 2rem; " [ngStyle]="{'width': !collapsed ? '80%'  : '90%'}">
    <table class="table table-striped thead-dark" style="margin: auto; width: 80%;">
        <tbody>
            <tr>
                <td class="width-low"></td>
                <td >
                    <div style="font-size: 36pt; text-align: center; font-weight: bolder;">{{stationName}}</div>
                </td>
                <td class="width-low"></td>
            </tr>
            @for (item of stationDetails; track item; let i=$index) {
                <tr>
                    @if(stationList[i][0][0] === stationName) {
                        <td class="width-zero">-</td>
                    } @else {
                        <td class="width-low" (click)="stationName = stationList[i][0][0];getStationData()" [routerLink]="['/station', location, stationList[i][0][0]]">{{stationList[i][0][0]}}</td>
                    }
                    <td class="width-zero"><button class="btn btn-link" data-bs-target="#routeModal" data-bs-toggle="modal" (click)="setRouteDetails(item, stationList[i][0])">(line info)</button></td>
                    @if (!item.colorCode) {
                        @if(stationList[i][0][stationList[i][0].length-1] === stationName) {
                            <td class="width-zero">-</td>
                        } @else {
                            <td class="width-low" data-bs-toggle="modal" (click)="stationName = stationList[i][0][stationList[i][0].length-1];getStationData()" [routerLink]="['/station', location, stationList[i][0][stationList[i][0].length-1]]">{{stationList[i][0][stationList[i][0].length-1]}}</td>
                        }
                    } @else {
                        @if(stationList[i][0][stationList[i][0].length-2] === stationName) {
                            <td class="width-zero">-</td>
                        } @else {
                            <td class="width-low" data-bs-toggle="modal" (click)="stationName = stationList[i][0][stationList[i][0].length-2];getStationData()" [routerLink]="['/station', location, stationList[i][0][stationList[i][0].length-2]]">{{stationList[i][0][stationList[i][0].length-2]}}</td>
                        }
                    }
                </tr>
            }
        </tbody>
    </table>
</div>
<div class="modal fade" id="routeModal" tabindex="-1" role="dialog" aria-labelledby="stationNameModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header" style="width: 100%;">
                @if (!tempTableArr.includes('colorCode')) {
                    <h5 class="modal-title" id="exampleModalLabel">Route Details (<i>{{tempTableArr[0]}} - {{tempTableArr[tempTableArr.length-1]}}</i>)</h5>
                } @else {
                    <h5 class="modal-title" id="exampleModalLabel">Route Details (<i>{{tempTableArr[0]}} - {{tempTableArr[tempTableArr.length-2]}}</i>)</h5>
                }
                <button class="btn btn-danger" style="right: 2%; position: absolute;" data-bs-dismiss="modal">X</button>
            </div>
            
            <div class="modal-body" style="overflow: auto;">
                <table class="table " style="border-left: 2px;">
                      <tbody>
                        <tr>
                          @for (val of tempTableArr; track val; let j=$index) {
                            @if (val !== 'colorCode') {
                              @if (j%2 === 0) {
                                <td [routerLink]="['/station', location, val]" data-bs-toggle="modal" (click)="stationName = val;getStationData()" [ngStyle]="{'text-decoration': tempTable[val] === 'Y' ? 'underline' : '', 'color': val === stationName ? 'red': ''}">{{val}}</td>
                              } @else {
                                <td></td>
                              }
                            }
                          }
                        </tr>
                        <tr>
                          @for (val of tempTableArr; track val; let j=$index) {
                            @if (val !== 'colorCode') {
                              @if (j%2 === 1) {
                                <td [routerLink]="['/station', location, val]" data-bs-toggle="modal" (click)="stationName = val;getStationData()" [ngStyle]="{'text-decoration': tempTable[val] === 'Y' ? 'underline' : '' , 'color': val === stationName ? 'red': ''}">{{val}}</td>
                              } @else {
                                <td></td>
                              }
                            }
                          }
                        </tr>
                      </tbody>
                    </table>
            </div>
        </div>
    </div>
</div>